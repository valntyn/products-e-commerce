import{f as J,j as n,a as e,_ as Z,c as y,r as i,$ as F,a0 as ee,m as te,z as se,o as ce,a1 as W,u as Q,a2 as j,M as ae,F as oe,a3 as ne,l as S,L as re,p as ie,O as B,a4 as le,Q as de,R as ue,T as me,a5 as _e,U as T,a6 as pe,a7 as he,S as ge}from"./index-8d15fdba.js";import{u as be,a as fe,b as ve,S as Ne}from"./star-48fe5e8c.js";const ye=({text:s})=>{const r=J(),l=()=>r(-1),o=()=>r("/");return n("div",{className:"error_notify",children:[e("div",{className:"error_notify__img",children:e(Z,{className:"error_notify__svg"})}),e("p",{className:"error_notify__text",children:`Sorry, the ${s} you are looking for could not be found.`}),n("div",{className:"error_notify__box",children:[e("button",{type:"button",className:"error_notify__button",onClick:l,children:"return back"}),e("button",{type:"button",className:"error_notify__button",onClick:o,children:"return to home"})]})]})},ke=250,Pe=32,Se=4,we=1480,$e=1080,Ce=768,Ie=()=>{const s=be();return s<Ce?1:s<$e?2:s<we?3:Se};const Ae=()=>{const{products:s,selectedProduct:r}=y(c=>c.products),{category:l}=r||{},o=i.useMemo(()=>s.filter(c=>c.category===l&&c.id!==(r==null?void 0:r.id)),[s,l,r]),t=Ie(),[h,u]=i.useState(t),m=-(h-t)*(ke+Pe),a=i.useMemo(()=>({transform:`translateX(${m}px)`,transition:"transform 1s"}),[m]),p=i.useCallback(()=>{u(c=>{const _=o.length;let N=c+t;return N>_&&(N=_),N})},[o.length,t]),g=i.useCallback(()=>{u(c=>{let _=c-t;return _<t&&(_=t),_})},[t]),b=h===t,f=h===o.length;return n("div",{className:"product-carousel",children:[n("div",{className:"product-carousel__box",children:[e("h2",{className:"product-carousel__title",children:"You will maybe love"}),n("div",{className:"product-carousel__button-box",children:[e("button",{className:"product-carousel__button",type:"button",onClick:g,disabled:b,children:e(F,{className:`
              product-carousel__svg
              product-carousel__svg--left
            `})}),e("p",{className:"product-carousel__more",children:"More products"}),e("button",{className:"product-carousel__button",type:"button",onClick:p,disabled:f,children:e(F,{className:`
              product-carousel__svg
              product-carousel__svg--right
            `})})]})]}),e("div",{className:"product-carousel__wrapper",children:e("ul",{className:"product-carousel__cards",style:a,children:o.map(c=>e(ee,{product:c},c.id))})})]})};const Te=()=>{const{selectedProduct:s}=y(c=>c.products),{rating:r=0,category:l="",stock:o,delivery:t,time:h,reviews:u,description:m,country:a,color:p}=s||{},g=u==null?void 0:u.length,b=o&&Object.keys(o).join(", "),f={Country:a,Category:te(l),Stock:o?"In stock":"Out of stock",Color:p,Size:"all sizes","Buy by":b,Delivery:`in ${h} days`,"Delivery area":t};return n("div",{className:"general-info",children:[e("h1",{className:"general-info__title",children:s==null?void 0:s.title}),n("div",{className:"general-info__rating-box",children:[e(se,{number:r,activeStarIcon:fe,inactiveStarIcon:ve}),e("p",{className:"general-info__rating-qnty",children:g&&`(${g} customer reviews)`})]}),e("p",{className:"general-info__desc-full",children:m}),e("ul",{className:"general-info__desc-list",children:Object.entries(f).map(([c,_])=>n("li",{className:"general-info__item",children:[e("p",{className:"general-info__key",children:`${c}:`}),e("p",{className:"general-info__value",children:_})]},c))})]})},De=s=>i.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s},i.createElement("path",{d:"M14.1608 8H3.49414",stroke:"#92C064",strokeWidth:2.5,strokeLinecap:"round",strokeLinejoin:"bevel"}),i.createElement("path",{d:"M8.82812 13.3333V2.66663",stroke:"#92C064",strokeWidth:2.5,strokeLinecap:"round",strokeLinejoin:"bevel"}));const xe=i.memo(({price:s,quantity:r})=>{const{selectedProduct:l}=y(a=>a.products),{discount:o=0}=l||{},t=s*r,h=+ce(s,o)*r,u=W(h),m=W(t);return n("div",{className:"price-panel",children:[e("p",{className:"price-panel__new",children:u}),e("p",{className:"price-panel__old",children:m})]})});const Ee=()=>{const s=Q(),{selectedProduct:r}=y(d=>d.products),{itemsInFavorite:l}=y(d=>d.wishlist),{items:o}=y(d=>d.cart),[t,h]=i.useState(null),[u,m]=i.useState(0),[a,p]=i.useState(j),[g,b]=i.useState(""),[f,c]=i.useState(""),[_,N]=i.useState(!1),[D,A]=i.useState(!1),[z,x]=i.useState(!1),{isAuth:E}=ae(),{price:w=null,stock:$,id:k="",title:L}=r||{},P=$?$[t]:0,I=$&&Object.keys($),G=o.some(d=>d.id===k),M=l.some(d=>d===k),q=E&&M,C=o.find(d=>d.productId===`${k}-${t}`),v=C==null?void 0:C.selectedStock;i.useEffect(()=>{I&&w&&(h(I[0]),m(w[I[0]]))},[]),i.useEffect(()=>{const d=f&&setTimeout(()=>c(""),2e3);return()=>clearTimeout(d)},[f]);const U=()=>{b(""),x(!1)},K=i.useCallback(d=>{h(d),m(w?w[d]:0)},[w]),O=()=>{if(C&&v){const d=P-v;if(v>P||a>d){p(d),b(`in stock only ${P}${t}, in cart ${v}`);return}}if(r){if(s(_e({id:k,productId:`${k}-${t}`,selectedStock:a,selectedPackage:t,stock:$})),C&&v){const d=v+a;c(`Added ${a} ${t} of ${L}. In cart ${d}${t}`)}else c(`Added ${a} ${t} of ${L}.`);p(j)}},V=()=>{if(U(),v){v+a>P&&(x(!0),b(`in stock only ${P}${t}, in cart ${v}${t}(s)`)),N(!0);return}O()},R=()=>{N(!1)},X=()=>{R(),O()},Y=()=>{if(!E){A(!0);return}s(M?ue(k):me(k))};return n(oe,{children:[n("div",{className:"display",children:[n("div",{className:"display__box",children:[e(xe,{price:u,quantity:a}),n("div",{className:"display__right",children:[e("div",{className:"display__qnt-wrapper",children:e(ne,{setQuantity:p,handleSelectTypeOfPackage:K,typeOfPack:t,setError:b,error:g,quantity:a,stockKeys:I,selectedStock:P,availableStock:v,isProduct:!0})}),n("button",{type:"button",className:S("display__button"),disabled:!a,onClick:V,children:[e(De,{className:S("display__svg")}),"Add to cart"]}),f&&e("p",{className:"display__notification",children:f})]})]}),n("div",{className:"display__wish-box",children:[n("button",{className:S("display__button-wish",{"display__button-wish--active":q}),type:"button",onClick:Y,children:[e(Ne,{className:"display__svg display__svg--heart"}),q?"Remove from wish list":"Add to my wish list"]}),G&&e(re,{className:"display__cart",to:ie.checkout,children:"The product has been added to the cart."})]})]}),_&&e(B,{setIsModalActive:N,isModalActive:_,children:e(le,{handleApprove:X,handleDismiss:R,message:`You have ${v} item(s) in your cart with the selected package already. Do you want to add ${a}${t} more?`,error:g,isDisabled:z})}),D&&e(B,{setIsModalActive:A,isModalActive:D,children:e(de,{id:k,setIsModalActive:A})})]})};const Le=({className:s,onClick:r,selectedId:l,tabs:o})=>{const[t,h]=i.useState({}),u=i.useRef(null),m=()=>{var p,g;const a=(p=u.current)==null?void 0:p.querySelector(".tabs__tab--selected");if(a){const{width:b,left:f}=a.getBoundingClientRect(),c=((g=u.current)==null?void 0:g.getBoundingClientRect().left)||0;h({width:b,transform:`translateX(${f-c}px)`})}};return i.useEffect(()=>(m(),window.addEventListener("resize",m),()=>{window.removeEventListener("resize",m)}),[l]),n("div",{className:S("tabs",s),ref:u,children:[o==null?void 0:o.map(a=>n("div",{className:S("tabs__tab",{"tabs__tab--selected":a.id===l}),onClick:()=>r&&r(a.id),children:[e("p",{className:S("tabs__label",{"tabs__label--selected":a.id===l}),children:a.label}),a.quantity&&e("p",{className:"tabs__qnty",children:a.quantity})]},a.id)),e("div",{className:"tabs__tab-animated",style:t})]})};const Me=()=>{const{selectedProduct:s}=y(c=>c.products),{origin:r,recipe:l,reviews:o,questions:t,answers:h=[]}=s||{},u=(o==null?void 0:o.length)??0,m=(t==null?void 0:t.length)??0,a=[{id:"1",label:"Description"},{id:"2",label:"Reviews",quantity:`${u}`},{id:"3",label:"Questions",quantity:`${m}`}],[p,g]=i.useState(a[0].id),b=c=>{g(c)},f=c=>{var _;return((_=h.find(N=>N.questionId===c))==null?void 0:_.answer)||!1};return n("div",{children:[e(Le,{selectedId:p,onClick:b,tabs:a}),n("div",{className:"product-tab",children:[p===a[0].id&&n("section",{className:"product-tab__section",children:[e("h3",{className:"product-tab__title",children:"Origins"}),e("p",{className:"product-tab__desc",children:r}),e("h3",{className:"product-tab__title",children:"Recipe"}),e("p",{className:"product-tab__desc",children:l})]}),p===a[1].id&&n("section",{className:"product-tab__section",children:[e("h3",{className:"product-tab__title",children:u?"Last reviews:":"There are not reviews yet"}),e("ul",{className:"product-tab__rewiew-list",children:o==null?void 0:o.map((c,_)=>e("li",{className:"product-tab__rewiew",children:c},_))})]}),p===a[2].id&&n("section",{className:"product-tab__section",children:[e("h3",{className:"product-tab__title",children:m?"Last questions:":"There are not questions yet"}),e("ul",{className:"product-tab__questions-list",children:t==null?void 0:t.map(c=>n("li",{className:"product-tab__question-item",children:[e("p",{className:"product-tab__question",children:c.question}),e("p",{className:"product-tab__answer",children:f(c.questionId)})]},c.questionId))})]})]})]})};const qe=()=>n("div",{className:"product-desc",children:[e(Te,{}),e(Ee,{}),e(Me,{})]});const Oe=()=>{const{selectedProduct:s}=y(t=>t.products),{discount:r=0,img:l=[],freeShipping:o}=s||{};return n("div",{className:"product-images",children:[n("div",{className:"product-images__addition-box",children:[!!r&&e("p",{className:"product-images__element",children:`- ${r} %`}),o&&e("p",{className:"product-images__element",children:"Free shipping"})]}),e("div",{className:"product-images__large-box",children:e("img",{src:l[0]||T,alt:"main",className:"product-images__large-img"})}),n("div",{className:"product-images__small-box",children:[e("img",{src:l[1]||T,alt:"secondary",className:"product-images__small-img"}),e("img",{src:l[2]||T,alt:"secondary",className:"product-images__small-img"})]})]})};const Re=()=>n("div",{className:"product-block",children:[n("div",{className:"product-block__info",children:[e(Oe,{}),e(qe,{})]}),e("div",{className:"product-block__carousel",children:e(Ae,{})})]});var H=(s=>(s.PRODUCT="product",s))(H||{});const je=()=>{const s=Q(),{id:r=""}=pe();i.useEffect(()=>{s(he(r)),window.scrollTo(0,0)},[s,r]);const{isSelectedProductLoading:l,isSelectedProductError:o}=y(t=>t.products);return l?e(ge,{}):o?e(ye,{text:H.PRODUCT}):e("div",{className:"product-page",children:e(Re,{})})};export{je as default};
